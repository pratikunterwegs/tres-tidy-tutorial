<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Section 1 Reading files and string manipulation | TRES Tidyverse Tutorial</title>
  <meta name="description" content="Section 1 Reading files and string manipulation | TRES Tidyverse Tutorial" />
  <meta name="generator" content="bookdown 0.20 and GitBook 2.6.7" />

  <meta property="og:title" content="Section 1 Reading files and string manipulation | TRES Tidyverse Tutorial" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Section 1 Reading files and string manipulation | TRES Tidyverse Tutorial" />
  <meta name="github-repo" content="pratikunterwegs/tres-tidy-tutorial" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Section 1 Reading files and string manipulation | TRES Tidyverse Tutorial" />
  
  <meta name="twitter:description" content="Section 1 Reading files and string manipulation | TRES Tidyverse Tutorial" />
  

<meta name="author" content="Raphael, Pratik, Theo and Richèl" />


<meta name="date" content="2020-07-10" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="index.html"/>
<link rel="next" href="reshaping-data-tables-in-the-tidyverse-and-other-things.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Outline</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#about"><i class="fa fa-check"></i>About</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#schedule"><i class="fa fa-check"></i>Schedule</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#possible-extras"><i class="fa fa-check"></i>Possible extras</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#join"><i class="fa fa-check"></i>Join</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="reading-files-and-string-manipulation.html"><a href="reading-files-and-string-manipulation.html"><i class="fa fa-check"></i><b>1</b> Reading files and string manipulation</a><ul>
<li class="chapter" data-level="1.1" data-path="reading-files-and-string-manipulation.html"><a href="reading-files-and-string-manipulation.html#data-import-and-export-with-readr"><i class="fa fa-check"></i><b>1.1</b> Data import and export with <code>readr</code></a><ul>
<li class="chapter" data-level="1.1.1" data-path="reading-files-and-string-manipulation.html"><a href="reading-files-and-string-manipulation.html#reading-data"><i class="fa fa-check"></i><b>1.1.1</b> Reading data</a></li>
<li class="chapter" data-level="1.1.2" data-path="reading-files-and-string-manipulation.html"><a href="reading-files-and-string-manipulation.html#writing-data"><i class="fa fa-check"></i><b>1.1.2</b> Writing data</a></li>
<li class="chapter" data-level="1.1.3" data-path="reading-files-and-string-manipulation.html"><a href="reading-files-and-string-manipulation.html#reading-and-writing-lines"><i class="fa fa-check"></i><b>1.1.3</b> Reading and writing lines</a></li>
<li class="chapter" data-level="" data-path="reading-files-and-string-manipulation.html"><a href="reading-files-and-string-manipulation.html#excel-files"><i class="fa fa-check"></i>Excel files</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="reading-files-and-string-manipulation.html"><a href="reading-files-and-string-manipulation.html#string-manipulation-with-stringr"><i class="fa fa-check"></i><b>1.2</b> String manipulation with <code>stringr</code></a><ul>
<li class="chapter" data-level="1.2.1" data-path="reading-files-and-string-manipulation.html"><a href="reading-files-and-string-manipulation.html#putting-strings-together"><i class="fa fa-check"></i><b>1.2.1</b> Putting strings together</a></li>
<li class="chapter" data-level="1.2.2" data-path="reading-files-and-string-manipulation.html"><a href="reading-files-and-string-manipulation.html#detecting-strings"><i class="fa fa-check"></i><b>1.2.2</b> Detecting strings</a></li>
<li class="chapter" data-level="1.2.3" data-path="reading-files-and-string-manipulation.html"><a href="reading-files-and-string-manipulation.html#matching-strings"><i class="fa fa-check"></i><b>1.2.3</b> Matching strings</a></li>
<li class="chapter" data-level="1.2.4" data-path="reading-files-and-string-manipulation.html"><a href="reading-files-and-string-manipulation.html#simpler-pattern-extraction"><i class="fa fa-check"></i><b>1.2.4</b> Simpler pattern extraction</a></li>
<li class="chapter" data-level="1.2.5" data-path="reading-files-and-string-manipulation.html"><a href="reading-files-and-string-manipulation.html#breaking-strings-apart"><i class="fa fa-check"></i><b>1.2.5</b> Breaking strings apart</a></li>
<li class="chapter" data-level="1.2.6" data-path="reading-files-and-string-manipulation.html"><a href="reading-files-and-string-manipulation.html#replacing-string-elements"><i class="fa fa-check"></i><b>1.2.6</b> Replacing string elements</a></li>
<li class="chapter" data-level="1.2.7" data-path="reading-files-and-string-manipulation.html"><a href="reading-files-and-string-manipulation.html#subsetting-within-strings"><i class="fa fa-check"></i><b>1.2.7</b> Subsetting within strings</a></li>
<li class="chapter" data-level="1.2.8" data-path="reading-files-and-string-manipulation.html"><a href="reading-files-and-string-manipulation.html#padding-and-truncating-strings"><i class="fa fa-check"></i><b>1.2.8</b> Padding and truncating strings</a></li>
<li class="chapter" data-level="1.2.9" data-path="reading-files-and-string-manipulation.html"><a href="reading-files-and-string-manipulation.html#stringr-aspects-not-covered-here"><i class="fa fa-check"></i><b>1.2.9</b> Stringr aspects not covered here</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="reading-files-and-string-manipulation.html"><a href="reading-files-and-string-manipulation.html#string-interpolation-with-glue"><i class="fa fa-check"></i><b>1.3</b> String interpolation with <code>glue</code></a></li>
<li class="chapter" data-level="1.4" data-path="reading-files-and-string-manipulation.html"><a href="reading-files-and-string-manipulation.html#strings-in-ggplot"><i class="fa fa-check"></i><b>1.4</b> Strings in <code>ggplot</code></a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="reshaping-data-tables-in-the-tidyverse-and-other-things.html"><a href="reshaping-data-tables-in-the-tidyverse-and-other-things.html"><i class="fa fa-check"></i><b>2</b> Reshaping data tables in the tidyverse, and other things</a><ul>
<li class="chapter" data-level="2.1" data-path="reshaping-data-tables-in-the-tidyverse-and-other-things.html"><a href="reshaping-data-tables-in-the-tidyverse-and-other-things.html#the-new-data-frame-tibble"><i class="fa fa-check"></i><b>2.1</b> The new data frame: tibble</a></li>
<li class="chapter" data-level="2.2" data-path="reshaping-data-tables-in-the-tidyverse-and-other-things.html"><a href="reshaping-data-tables-in-the-tidyverse-and-other-things.html#the-concept-of-tidy-data"><i class="fa fa-check"></i><b>2.2</b> The concept of tidy data</a></li>
<li class="chapter" data-level="2.3" data-path="reshaping-data-tables-in-the-tidyverse-and-other-things.html"><a href="reshaping-data-tables-in-the-tidyverse-and-other-things.html#reshaping-with-tidyr"><i class="fa fa-check"></i><b>2.3</b> Reshaping with <code>tidyr</code></a><ul>
<li class="chapter" data-level="2.3.1" data-path="reshaping-data-tables-in-the-tidyverse-and-other-things.html"><a href="reshaping-data-tables-in-the-tidyverse-and-other-things.html#pivoting"><i class="fa fa-check"></i><b>2.3.1</b> Pivoting</a></li>
<li class="chapter" data-level="2.3.2" data-path="reshaping-data-tables-in-the-tidyverse-and-other-things.html"><a href="reshaping-data-tables-in-the-tidyverse-and-other-things.html#handling-missing-values"><i class="fa fa-check"></i><b>2.3.2</b> Handling missing values</a></li>
<li class="chapter" data-level="2.3.3" data-path="reshaping-data-tables-in-the-tidyverse-and-other-things.html"><a href="reshaping-data-tables-in-the-tidyverse-and-other-things.html#splitting-and-combining-cells"><i class="fa fa-check"></i><b>2.3.3</b> Splitting and combining cells</a></li>
<li class="chapter" data-level="2.3.4" data-path="reshaping-data-tables-in-the-tidyverse-and-other-things.html"><a href="reshaping-data-tables-in-the-tidyverse-and-other-things.html#expanding-tables-using-combinations"><i class="fa fa-check"></i><b>2.3.4</b> Expanding tables using combinations</a></li>
<li class="chapter" data-level="2.3.5" data-path="reshaping-data-tables-in-the-tidyverse-and-other-things.html"><a href="reshaping-data-tables-in-the-tidyverse-and-other-things.html#nesting"><i class="fa fa-check"></i><b>2.3.5</b> Nesting</a></li>
<li class="chapter" data-level="2.3.6" data-path="reshaping-data-tables-in-the-tidyverse-and-other-things.html"><a href="reshaping-data-tables-in-the-tidyverse-and-other-things.html#what-else-can-be-tidied-up"><i class="fa fa-check"></i><b>2.3.6</b> What else can be tidied up?</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="reshaping-data-tables-in-the-tidyverse-and-other-things.html"><a href="reshaping-data-tables-in-the-tidyverse-and-other-things.html#extra-factors-and-the-forcats-package"><i class="fa fa-check"></i><b>2.4</b> Extra: factors and the <code>forcats</code> package</a><ul>
<li class="chapter" data-level="2.4.1" data-path="reshaping-data-tables-in-the-tidyverse-and-other-things.html"><a href="reshaping-data-tables-in-the-tidyverse-and-other-things.html#change-the-order-of-the-levels"><i class="fa fa-check"></i><b>2.4.1</b> Change the order of the levels</a></li>
<li class="chapter" data-level="2.4.2" data-path="reshaping-data-tables-in-the-tidyverse-and-other-things.html"><a href="reshaping-data-tables-in-the-tidyverse-and-other-things.html#change-the-levels-themselves"><i class="fa fa-check"></i><b>2.4.2</b> Change the levels themselves</a></li>
<li class="chapter" data-level="2.4.3" data-path="reshaping-data-tables-in-the-tidyverse-and-other-things.html"><a href="reshaping-data-tables-in-the-tidyverse-and-other-things.html#dropping-levels"><i class="fa fa-check"></i><b>2.4.3</b> Dropping levels</a></li>
<li class="chapter" data-level="2.4.4" data-path="reshaping-data-tables-in-the-tidyverse-and-other-things.html"><a href="reshaping-data-tables-in-the-tidyverse-and-other-things.html#other-things"><i class="fa fa-check"></i><b>2.4.4</b> Other things</a></li>
<li class="chapter" data-level="2.4.5" data-path="reshaping-data-tables-in-the-tidyverse-and-other-things.html"><a href="reshaping-data-tables-in-the-tidyverse-and-other-things.html#take-home-message-for-forcats"><i class="fa fa-check"></i><b>2.4.5</b> Take home message for forcats</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="reshaping-data-tables-in-the-tidyverse-and-other-things.html"><a href="reshaping-data-tables-in-the-tidyverse-and-other-things.html#external-resources"><i class="fa fa-check"></i><b>2.5</b> External resources</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="data-manipulation-with-dplyr.html"><a href="data-manipulation-with-dplyr.html"><i class="fa fa-check"></i><b>3</b> Data manipulation with <code>dplyr</code></a><ul>
<li class="chapter" data-level="3.1" data-path="data-manipulation-with-dplyr.html"><a href="data-manipulation-with-dplyr.html#introduction"><i class="fa fa-check"></i><b>3.1</b> Introduction</a><ul>
<li class="chapter" data-level="3.1.1" data-path="data-manipulation-with-dplyr.html"><a href="data-manipulation-with-dplyr.html#foreword-on-dplyr"><i class="fa fa-check"></i><b>3.1.1</b> Foreword on <code>dplyr</code></a></li>
<li class="chapter" data-level="3.1.2" data-path="data-manipulation-with-dplyr.html"><a href="data-manipulation-with-dplyr.html#example-data"><i class="fa fa-check"></i><b>3.1.2</b> Example data</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="data-manipulation-with-dplyr.html"><a href="data-manipulation-with-dplyr.html#working-with-existing-variables"><i class="fa fa-check"></i><b>3.2</b> Working with existing variables</a><ul>
<li class="chapter" data-level="3.2.1" data-path="data-manipulation-with-dplyr.html"><a href="data-manipulation-with-dplyr.html#renaming-variables-with-rename"><i class="fa fa-check"></i><b>3.2.1</b> Renaming variables with <code>rename()</code></a></li>
<li class="chapter" data-level="3.2.2" data-path="data-manipulation-with-dplyr.html"><a href="data-manipulation-with-dplyr.html#the-pipe-operator"><i class="fa fa-check"></i><b>3.2.2</b> The pipe operator <code>%&gt;%</code></a></li>
<li class="chapter" data-level="3.2.3" data-path="data-manipulation-with-dplyr.html"><a href="data-manipulation-with-dplyr.html#select-variables-with-select"><i class="fa fa-check"></i><b>3.2.3</b> Select variables with <code>select()</code></a></li>
<li class="chapter" data-level="3.2.4" data-path="data-manipulation-with-dplyr.html"><a href="data-manipulation-with-dplyr.html#select-variables-with-helpers"><i class="fa fa-check"></i><b>3.2.4</b> Select variables with helpers</a></li>
<li class="chapter" data-level="3.2.5" data-path="data-manipulation-with-dplyr.html"><a href="data-manipulation-with-dplyr.html#rearranging-variable-order-with-relocate"><i class="fa fa-check"></i><b>3.2.5</b> Rearranging variable order with <code>relocate()</code></a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="data-manipulation-with-dplyr.html"><a href="data-manipulation-with-dplyr.html#working-with-observations"><i class="fa fa-check"></i><b>3.3</b> Working with observations</a><ul>
<li class="chapter" data-level="3.3.1" data-path="data-manipulation-with-dplyr.html"><a href="data-manipulation-with-dplyr.html#ordering-rows-by-value---arrange"><i class="fa fa-check"></i><b>3.3.1</b> Ordering rows by value - <code>arrange()</code></a></li>
<li class="chapter" data-level="3.3.2" data-path="data-manipulation-with-dplyr.html"><a href="data-manipulation-with-dplyr.html#subset-rows-by-position---slice"><i class="fa fa-check"></i><b>3.3.2</b> Subset rows by position - <code>slice()</code></a></li>
<li class="chapter" data-level="3.3.3" data-path="data-manipulation-with-dplyr.html"><a href="data-manipulation-with-dplyr.html#subsetting-rows-by-value-with-filter"><i class="fa fa-check"></i><b>3.3.3</b> Subsetting rows by value with <code>filter()</code></a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="data-manipulation-with-dplyr.html"><a href="data-manipulation-with-dplyr.html#making-new-variables"><i class="fa fa-check"></i><b>3.4</b> Making new variables</a><ul>
<li class="chapter" data-level="3.4.1" data-path="data-manipulation-with-dplyr.html"><a href="data-manipulation-with-dplyr.html#create-new-variables-with-mutate"><i class="fa fa-check"></i><b>3.4.1</b> Create new variables with <code>mutate()</code></a></li>
<li class="chapter" data-level="3.4.2" data-path="data-manipulation-with-dplyr.html"><a href="data-manipulation-with-dplyr.html#summarise-observations-with-summarise"><i class="fa fa-check"></i><b>3.4.2</b> Summarise observations with <code>summarise()</code></a></li>
<li class="chapter" data-level="3.4.3" data-path="data-manipulation-with-dplyr.html"><a href="data-manipulation-with-dplyr.html#grouping-observations-by-variables"><i class="fa fa-check"></i><b>3.4.3</b> Grouping observations by variables</a></li>
<li class="chapter" data-level="3.4.4" data-path="data-manipulation-with-dplyr.html"><a href="data-manipulation-with-dplyr.html#grouped-data-and-other-dplyr-verbs"><i class="fa fa-check"></i><b>3.4.4</b> Grouped data and other <code>dplyr</code> verbs</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="data-manipulation-with-dplyr.html"><a href="data-manipulation-with-dplyr.html#working-with-multiple-tables"><i class="fa fa-check"></i><b>3.5</b> Working with multiple tables</a><ul>
<li class="chapter" data-level="3.5.1" data-path="data-manipulation-with-dplyr.html"><a href="data-manipulation-with-dplyr.html#binding-tables"><i class="fa fa-check"></i><b>3.5.1</b> Binding tables</a></li>
<li class="chapter" data-level="3.5.2" data-path="data-manipulation-with-dplyr.html"><a href="data-manipulation-with-dplyr.html#combining-variables-of-two-tables-with-mutating-joins"><i class="fa fa-check"></i><b>3.5.2</b> Combining variables of two tables with mutating joins</a></li>
<li class="chapter" data-level="3.5.3" data-path="data-manipulation-with-dplyr.html"><a href="data-manipulation-with-dplyr.html#filtering-matching-observations-between-two-tables-wiht-filtering-joins"><i class="fa fa-check"></i><b>3.5.3</b> Filtering matching observations between two tables wiht filtering joins</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="working-with-lists-and-iteration.html"><a href="working-with-lists-and-iteration.html"><i class="fa fa-check"></i><b>4</b> Working with lists and iteration</a><ul>
<li class="chapter" data-level="4.1" data-path="working-with-lists-and-iteration.html"><a href="working-with-lists-and-iteration.html#list-columns-with-tidyr"><i class="fa fa-check"></i><b>4.1</b> List columns with <code>tidyr</code></a><ul>
<li class="chapter" data-level="4.1.1" data-path="working-with-lists-and-iteration.html"><a href="working-with-lists-and-iteration.html#nesting-data"><i class="fa fa-check"></i><b>4.1.1</b> Nesting data</a></li>
<li class="chapter" data-level="4.1.2" data-path="working-with-lists-and-iteration.html"><a href="working-with-lists-and-iteration.html#unnesting-data"><i class="fa fa-check"></i><b>4.1.2</b> Unnesting data</a></li>
<li class="chapter" data-level="4.1.3" data-path="working-with-lists-and-iteration.html"><a href="working-with-lists-and-iteration.html#working-with-list-columns"><i class="fa fa-check"></i><b>4.1.3</b> Working with list columns</a></li>
<li class="chapter" data-level="" data-path="working-with-lists-and-iteration.html"><a href="working-with-lists-and-iteration.html#functionals"><i class="fa fa-check"></i>Functionals</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="working-with-lists-and-iteration.html"><a href="working-with-lists-and-iteration.html#iteration-with-map"><i class="fa fa-check"></i><b>4.2</b> Iteration with <code>map</code></a><ul>
<li class="chapter" data-level="4.2.1" data-path="working-with-lists-and-iteration.html"><a href="working-with-lists-and-iteration.html#basic-use-of-map"><i class="fa fa-check"></i><b>4.2.1</b> Basic use of <code>map</code></a></li>
<li class="chapter" data-level="4.2.2" data-path="working-with-lists-and-iteration.html"><a href="working-with-lists-and-iteration.html#map-variants-returning-vectors"><i class="fa fa-check"></i><b>4.2.2</b> <code>map</code> variants returning vectors</a></li>
<li class="chapter" data-level="4.2.3" data-path="working-with-lists-and-iteration.html"><a href="working-with-lists-and-iteration.html#map-variants-returning-data-frames"><i class="fa fa-check"></i><b>4.2.3</b> <code>map</code> variants returning data frames</a></li>
<li class="chapter" data-level="4.2.4" data-path="working-with-lists-and-iteration.html"><a href="working-with-lists-and-iteration.html#working-with-list-columns-using-map"><i class="fa fa-check"></i><b>4.2.4</b> Working with list columns using <code>map</code></a></li>
<li class="chapter" data-level="4.2.5" data-path="working-with-lists-and-iteration.html"><a href="working-with-lists-and-iteration.html#selective-mapping-using-map-variants"><i class="fa fa-check"></i><b>4.2.5</b> Selective mapping using <code>map</code> variants</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="working-with-lists-and-iteration.html"><a href="working-with-lists-and-iteration.html#more-map-variants"><i class="fa fa-check"></i><b>4.3</b> More <code>map</code> variants</a><ul>
<li class="chapter" data-level="4.3.1" data-path="working-with-lists-and-iteration.html"><a href="working-with-lists-and-iteration.html#mapping-over-two-inputs-with-map2"><i class="fa fa-check"></i><b>4.3.1</b> Mapping over two inputs with map2</a></li>
<li class="chapter" data-level="4.3.2" data-path="working-with-lists-and-iteration.html"><a href="working-with-lists-and-iteration.html#mapping-over-multiple-inputs-with-pmap"><i class="fa fa-check"></i><b>4.3.2</b> Mapping over multiple inputs with pmap</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="working-with-lists-and-iteration.html"><a href="working-with-lists-and-iteration.html#combining-map-variants-and-tidyverse-functions"><i class="fa fa-check"></i><b>4.4</b> Combining map variants and tidyverse functions</a></li>
<li class="chapter" data-level="4.5" data-path="working-with-lists-and-iteration.html"><a href="working-with-lists-and-iteration.html#a-return-to-map-variants"><i class="fa fa-check"></i><b>4.5</b> A return to map variants</a><ul>
<li class="chapter" data-level="4.5.1" data-path="working-with-lists-and-iteration.html"><a href="working-with-lists-and-iteration.html#iteration-without-a-return"><i class="fa fa-check"></i><b>4.5.1</b> Iteration without a return</a></li>
<li class="chapter" data-level="4.5.2" data-path="working-with-lists-and-iteration.html"><a href="working-with-lists-and-iteration.html#modify-rather-than-map"><i class="fa fa-check"></i><b>4.5.2</b> Modify rather than map</a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="working-with-lists-and-iteration.html"><a href="working-with-lists-and-iteration.html#other-functions-for-working-with-lists"><i class="fa fa-check"></i><b>4.6</b> Other functions for working with lists</a><ul>
<li class="chapter" data-level="4.6.1" data-path="working-with-lists-and-iteration.html"><a href="working-with-lists-and-iteration.html#filtering-lists"><i class="fa fa-check"></i><b>4.6.1</b> Filtering lists</a></li>
<li class="chapter" data-level="4.6.2" data-path="working-with-lists-and-iteration.html"><a href="working-with-lists-and-iteration.html#summarising-lists"><i class="fa fa-check"></i><b>4.6.2</b> Summarising lists</a></li>
<li class="chapter" data-level="4.6.3" data-path="working-with-lists-and-iteration.html"><a href="working-with-lists-and-iteration.html#reduction-and-accumulation"><i class="fa fa-check"></i><b>4.6.3</b> Reduction and accumulation</a></li>
<li class="chapter" data-level="4.6.4" data-path="working-with-lists-and-iteration.html"><a href="working-with-lists-and-iteration.html#miscellaneous-operation"><i class="fa fa-check"></i><b>4.6.4</b> Miscellaneous operation</a></li>
</ul></li>
<li class="chapter" data-level="4.7" data-path="working-with-lists-and-iteration.html"><a href="working-with-lists-and-iteration.html#lists-of-ggplots-with-patchwork"><i class="fa fa-check"></i><b>4.7</b> Lists of <code>ggplots</code> with <code>patchwork</code></a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="ggplot2-and-the-grammar-of-graphics.html"><a href="ggplot2-and-the-grammar-of-graphics.html"><i class="fa fa-check"></i><b>5</b> <code>ggplot2</code> and the grammar of graphics</a><ul>
<li class="chapter" data-level="5.1" data-path="data-manipulation-with-dplyr.html"><a href="data-manipulation-with-dplyr.html#introduction"><i class="fa fa-check"></i><b>5.1</b> Introduction</a><ul>
<li class="chapter" data-level="5.1.1" data-path="ggplot2-and-the-grammar-of-graphics.html"><a href="ggplot2-and-the-grammar-of-graphics.html#what-is-ggplot2-and-why-use-it"><i class="fa fa-check"></i><b>5.1.1</b> What is <code>ggplot2</code> and why use it?</a></li>
<li class="chapter" data-level="5.1.2" data-path="ggplot2-and-the-grammar-of-graphics.html"><a href="ggplot2-and-the-grammar-of-graphics.html#what-is-the-grammar-of-graphics"><i class="fa fa-check"></i><b>5.1.2</b> What is the grammar of graphics?</a></li>
<li class="chapter" data-level="5.1.3" data-path="ggplot2-and-the-grammar-of-graphics.html"><a href="ggplot2-and-the-grammar-of-graphics.html#quick-plot"><i class="fa fa-check"></i><b>5.1.3</b> Quick plot</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="ggplot2-and-the-grammar-of-graphics.html"><a href="ggplot2-and-the-grammar-of-graphics.html#but-first-the-data"><i class="fa fa-check"></i><b>5.2</b> But first, the data</a></li>
<li class="chapter" data-level="5.3" data-path="ggplot2-and-the-grammar-of-graphics.html"><a href="ggplot2-and-the-grammar-of-graphics.html#geom-layers"><i class="fa fa-check"></i><b>5.3</b> Geom layers</a><ul>
<li class="chapter" data-level="5.3.1" data-path="ggplot2-and-the-grammar-of-graphics.html"><a href="ggplot2-and-the-grammar-of-graphics.html#mapping-variables-to-aesthetics"><i class="fa fa-check"></i><b>5.3.1</b> Mapping variables to aesthetics</a></li>
<li class="chapter" data-level="5.3.2" data-path="ggplot2-and-the-grammar-of-graphics.html"><a href="ggplot2-and-the-grammar-of-graphics.html#fixed-aesthetics"><i class="fa fa-check"></i><b>5.3.2</b> Fixed aesthetics</a></li>
<li class="chapter" data-level="5.3.3" data-path="ggplot2-and-the-grammar-of-graphics.html"><a href="ggplot2-and-the-grammar-of-graphics.html#statistical-transformation"><i class="fa fa-check"></i><b>5.3.3</b> Statistical transformation</a></li>
<li class="chapter" data-level="5.3.4" data-path="ggplot2-and-the-grammar-of-graphics.html"><a href="ggplot2-and-the-grammar-of-graphics.html#position"><i class="fa fa-check"></i><b>5.3.4</b> Position</a></li>
<li class="chapter" data-level="5.3.5" data-path="ggplot2-and-the-grammar-of-graphics.html"><a href="ggplot2-and-the-grammar-of-graphics.html#other-geoms"><i class="fa fa-check"></i><b>5.3.5</b> Other geoms</a></li>
<li class="chapter" data-level="5.3.6" data-path="ggplot2-and-the-grammar-of-graphics.html"><a href="ggplot2-and-the-grammar-of-graphics.html#extra-on-aesthetics"><i class="fa fa-check"></i><b>5.3.6</b> Extra on aesthetics</a></li>
<li class="chapter" data-level="5.3.7" data-path="ggplot2-and-the-grammar-of-graphics.html"><a href="ggplot2-and-the-grammar-of-graphics.html#plot-wide-aesthetics-and-multiple-geoms"><i class="fa fa-check"></i><b>5.3.7</b> Plot-wide aesthetics and multiple geoms</a></li>
<li class="chapter" data-level="5.3.8" data-path="ggplot2-and-the-grammar-of-graphics.html"><a href="ggplot2-and-the-grammar-of-graphics.html#multiple-geoms-with-different-datasets"><i class="fa fa-check"></i><b>5.3.8</b> Multiple geoms with different datasets</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="ggplot2-and-the-grammar-of-graphics.html"><a href="ggplot2-and-the-grammar-of-graphics.html#coordinate-system"><i class="fa fa-check"></i><b>5.4</b> Coordinate-system</a></li>
<li class="chapter" data-level="5.5" data-path="ggplot2-and-the-grammar-of-graphics.html"><a href="ggplot2-and-the-grammar-of-graphics.html#facetting"><i class="fa fa-check"></i><b>5.5</b> Facetting</a></li>
<li class="chapter" data-level="5.6" data-path="ggplot2-and-the-grammar-of-graphics.html"><a href="ggplot2-and-the-grammar-of-graphics.html#the-right-format-for-the-dataset"><i class="fa fa-check"></i><b>5.6</b> The right format for the dataset</a></li>
<li class="chapter" data-level="5.7" data-path="ggplot2-and-the-grammar-of-graphics.html"><a href="ggplot2-and-the-grammar-of-graphics.html#plotting-as-part-of-a-pipeline"><i class="fa fa-check"></i><b>5.7</b> Plotting as part of a pipeline</a></li>
<li class="chapter" data-level="5.8" data-path="ggplot2-and-the-grammar-of-graphics.html"><a href="ggplot2-and-the-grammar-of-graphics.html#customization"><i class="fa fa-check"></i><b>5.8</b> Customization</a><ul>
<li class="chapter" data-level="5.8.1" data-path="ggplot2-and-the-grammar-of-graphics.html"><a href="ggplot2-and-the-grammar-of-graphics.html#scales"><i class="fa fa-check"></i><b>5.8.1</b> Scales</a></li>
<li class="chapter" data-level="5.8.2" data-path="ggplot2-and-the-grammar-of-graphics.html"><a href="ggplot2-and-the-grammar-of-graphics.html#labels"><i class="fa fa-check"></i><b>5.8.2</b> Labels</a></li>
<li class="chapter" data-level="5.8.3" data-path="ggplot2-and-the-grammar-of-graphics.html"><a href="ggplot2-and-the-grammar-of-graphics.html#themes"><i class="fa fa-check"></i><b>5.8.3</b> Themes</a></li>
<li class="chapter" data-level="5.8.4" data-path="ggplot2-and-the-grammar-of-graphics.html"><a href="ggplot2-and-the-grammar-of-graphics.html#legend"><i class="fa fa-check"></i><b>5.8.4</b> Legend</a></li>
</ul></li>
<li class="chapter" data-level="5.9" data-path="ggplot2-and-the-grammar-of-graphics.html"><a href="ggplot2-and-the-grammar-of-graphics.html#combining-plots"><i class="fa fa-check"></i><b>5.9</b> Combining plots</a></li>
<li class="chapter" data-level="5.10" data-path="ggplot2-and-the-grammar-of-graphics.html"><a href="ggplot2-and-the-grammar-of-graphics.html#saving-a-plot"><i class="fa fa-check"></i><b>5.10</b> Saving a plot</a></li>
<li class="chapter" data-level="5.11" data-path="ggplot2-and-the-grammar-of-graphics.html"><a href="ggplot2-and-the-grammar-of-graphics.html#high-throughput-plotting-workflow"><i class="fa fa-check"></i><b>5.11</b> High throughput plotting workflow</a></li>
<li class="chapter" data-level="5.12" data-path="ggplot2-and-the-grammar-of-graphics.html"><a href="ggplot2-and-the-grammar-of-graphics.html#want-more"><i class="fa fa-check"></i><b>5.12</b> Want more?</a></li>
<li class="chapter" data-level="5.13" data-path="ggplot2-and-the-grammar-of-graphics.html"><a href="ggplot2-and-the-grammar-of-graphics.html#references"><i class="fa fa-check"></i><b>5.13</b> References</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="applications.html"><a href="applications.html"><i class="fa fa-check"></i><b>6</b> Applications</a><ul>
<li class="chapter" data-level="6.1" data-path="applications.html"><a href="applications.html#goal"><i class="fa fa-check"></i><b>6.1</b> Goal</a></li>
<li class="chapter" data-level="6.2" data-path="applications.html"><a href="applications.html#why-is-this-important"><i class="fa fa-check"></i><b>6.2</b> Why is this important?</a></li>
<li class="chapter" data-level="6.3" data-path="applications.html"><a href="applications.html#overview"><i class="fa fa-check"></i><b>6.3</b> Overview</a></li>
<li class="chapter" data-level="6.4" data-path="applications.html"><a href="applications.html#what-are-regular-expressions"><i class="fa fa-check"></i><b>6.4</b> What are regular expressions?</a></li>
<li class="chapter" data-level="6.5" data-path="applications.html"><a href="applications.html#our-first-test"><i class="fa fa-check"></i><b>6.5</b> Our first test</a></li>
<li class="chapter" data-level="6.6" data-path="applications.html"><a href="applications.html#our-first-dutch-zip-code-tests"><i class="fa fa-check"></i><b>6.6</b> Our first Dutch zip code tests</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="programming-in-the-tidyverse.html"><a href="programming-in-the-tidyverse.html"><i class="fa fa-check"></i><b>7</b> Programming in the <em>tidyverse</em></a><ul>
<li class="chapter" data-level="7.1" data-path="programming-in-the-tidyverse.html"><a href="programming-in-the-tidyverse.html#an-exlanation-of-the-problem"><i class="fa fa-check"></i><b>7.1</b> An exlanation of the problem</a><ul>
<li class="chapter" data-level="7.1.1" data-path="programming-in-the-tidyverse.html"><a href="programming-in-the-tidyverse.html#what-the-issue-is"><i class="fa fa-check"></i><b>7.1.1</b> What the issue is</a></li>
<li class="chapter" data-level="7.1.2" data-path="programming-in-the-tidyverse.html"><a href="programming-in-the-tidyverse.html#why-the-issue-is-a-problem"><i class="fa fa-check"></i><b>7.1.2</b> Why the issue is a problem</a></li>
<li class="chapter" data-level="7.1.3" data-path="programming-in-the-tidyverse.html"><a href="programming-in-the-tidyverse.html#passing-variables-as-strings-is-also-an-issue"><i class="fa fa-check"></i><b>7.1.3</b> Passing variables as strings is (also) an issue</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="programming-in-the-tidyverse.html"><a href="programming-in-the-tidyverse.html#flexible-selection-is-easy"><i class="fa fa-check"></i><b>7.2</b> Flexible selection is easy</a></li>
<li class="chapter" data-level="7.3" data-path="programming-in-the-tidyverse.html"><a href="programming-in-the-tidyverse.html#a-first-attempt-at-a-flexible-function"><i class="fa fa-check"></i><b>7.3</b> A first attempt at a flexible function</a><ul>
<li class="chapter" data-level="7.3.1" data-path="programming-in-the-tidyverse.html"><a href="programming-in-the-tidyverse.html#failure-of-the-first-attempt"><i class="fa fa-check"></i><b>7.3.1</b> Failure of the first attempt</a></li>
<li class="chapter" data-level="7.3.2" data-path="programming-in-the-tidyverse.html"><a href="programming-in-the-tidyverse.html#passing-arguments-as-strings-doesnt-help"><i class="fa fa-check"></i><b>7.3.2</b> Passing arguments as strings doesn’t help</a></li>
<li class="chapter" data-level="7.3.3" data-path="programming-in-the-tidyverse.html"><a href="programming-in-the-tidyverse.html#none-of-the-other-arguments-will-be-successful"><i class="fa fa-check"></i><b>7.3.3</b> None of the other arguments will be successful</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="programming-in-the-tidyverse.html"><a href="programming-in-the-tidyverse.html#flexible-filtering-in-a-function"><i class="fa fa-check"></i><b>7.4</b> Flexible filtering in a function</a><ul>
<li class="chapter" data-level="7.4.1" data-path="programming-in-the-tidyverse.html"><a href="programming-in-the-tidyverse.html#flexible-filtering-using-expressions"><i class="fa fa-check"></i><b>7.4.1</b> Flexible filtering using expressions</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="programming-in-the-tidyverse.html"><a href="programming-in-the-tidyverse.html#flexible-grouping-in-a-function"><i class="fa fa-check"></i><b>7.5</b> Flexible grouping in a function</a><ul>
<li class="chapter" data-level="7.5.1" data-path="programming-in-the-tidyverse.html"><a href="programming-in-the-tidyverse.html#using-...-and-forwarding"><i class="fa fa-check"></i><b>7.5.1</b> Using <code>...</code> and ‘forwarding’</a></li>
<li class="chapter" data-level="7.5.2" data-path="programming-in-the-tidyverse.html"><a href="programming-in-the-tidyverse.html#passing-grouping-variables-as-strings"><i class="fa fa-check"></i><b>7.5.2</b> Passing grouping variables as strings</a></li>
<li class="chapter" data-level="7.5.3" data-path="programming-in-the-tidyverse.html"><a href="programming-in-the-tidyverse.html#using-rlangsyms"><i class="fa fa-check"></i><b>7.5.3</b> Using <code>rlang::syms</code></a></li>
<li class="chapter" data-level="7.5.4" data-path="programming-in-the-tidyverse.html"><a href="programming-in-the-tidyverse.html#using-rlangparse_exprs"><i class="fa fa-check"></i><b>7.5.4</b> Using <code>rlang::parse_exprs</code></a></li>
</ul></li>
<li class="chapter" data-level="7.6" data-path="programming-in-the-tidyverse.html"><a href="programming-in-the-tidyverse.html#flexible-summarising-in-a-function"><i class="fa fa-check"></i><b>7.6</b> Flexible summarising in a function</a><ul>
<li class="chapter" data-level="7.6.1" data-path="programming-in-the-tidyverse.html"><a href="programming-in-the-tidyverse.html#using-dplyrsummarise_at"><i class="fa fa-check"></i><b>7.6.1</b> Using <code>dplyr::summarise_at</code></a></li>
<li class="chapter" data-level="7.6.2" data-path="programming-in-the-tidyverse.html"><a href="programming-in-the-tidyverse.html#using-the-across-argument-for-summary-variables"><i class="fa fa-check"></i><b>7.6.2</b> Using the <code>across</code> argument for summary variables</a></li>
<li class="chapter" data-level="7.6.3" data-path="programming-in-the-tidyverse.html"><a href="programming-in-the-tidyverse.html#summarise-multiple-variables-using-..."><i class="fa fa-check"></i><b>7.6.3</b> Summarise multiple variables using <code>...</code></a></li>
<li class="chapter" data-level="7.6.4" data-path="programming-in-the-tidyverse.html"><a href="programming-in-the-tidyverse.html#summarise-with-multiple-functions"><i class="fa fa-check"></i><b>7.6.4</b> Summarise with multiple functions</a></li>
</ul></li>
<li class="chapter" data-level="7.7" data-path="programming-in-the-tidyverse.html"><a href="programming-in-the-tidyverse.html#further-resources"><i class="fa fa-check"></i><b>7.7</b> Further resources</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">TRES Tidyverse Tutorial</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="reading-files-and-string-manipulation" class="section level1">
<h1><span class="header-section-number">Section 1</span> Reading files and string manipulation</h1>
<p><img src="opening-image.png" /></p>
<p>Load the packages for the day.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1"><span class="kw">library</span>(readr)</a>
<a class="sourceLine" id="cb1-2" title="2"><span class="kw">library</span>(stringr)</a>
<a class="sourceLine" id="cb1-3" title="3"><span class="kw">library</span>(glue)</a></code></pre></div>
<div id="data-import-and-export-with-readr" class="section level2">
<h2><span class="header-section-number">1.1</span> Data import and export with <code>readr</code></h2>
<p>Data in the wild with which ecologists and evolutionary biologists deal is most often in the form of a text file, usually with the extensions <code>.csv</code> or <code>.txt</code>. Often, such data has to be written to file from within <code>R</code>. <code>readr</code> contains a number of functions to help with reading and writing text files.</p>
<div id="reading-data" class="section level3">
<h3><span class="header-section-number">1.1.1</span> Reading data</h3>
<p>Reading in a csv file with <code>readr</code> is done with the <code>read_csv</code> function, a faster alternative to the base R <code>read.csv</code>. Here, <code>read_csv</code> is applied to the <code>mtcars</code> example.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" title="1"><span class="co"># get the filepath of the example</span></a>
<a class="sourceLine" id="cb2-2" title="2">some_example =<span class="st"> </span><span class="kw">readr_example</span>(<span class="st">&quot;mtcars.csv&quot;</span>)</a>
<a class="sourceLine" id="cb2-3" title="3"></a>
<a class="sourceLine" id="cb2-4" title="4"><span class="co"># read the file in</span></a>
<a class="sourceLine" id="cb2-5" title="5">some_example =<span class="st"> </span><span class="kw">read_csv</span>(some_example)</a>
<a class="sourceLine" id="cb2-6" title="6"></a>
<a class="sourceLine" id="cb2-7" title="7"><span class="kw">head</span>(some_example)</a>
<a class="sourceLine" id="cb2-8" title="8"><span class="co">#&gt; # A tibble: 6 x 11</span></a>
<a class="sourceLine" id="cb2-9" title="9"><span class="co">#&gt;     mpg   cyl  disp    hp  drat    wt  qsec    vs    am  gear  carb</span></a>
<a class="sourceLine" id="cb2-10" title="10"><span class="co">#&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb2-11" title="11"><span class="co">#&gt; 1  21       6   160   110  3.9   2.62  16.5     0     1     4     4</span></a>
<a class="sourceLine" id="cb2-12" title="12"><span class="co">#&gt; 2  21       6   160   110  3.9   2.88  17.0     0     1     4     4</span></a>
<a class="sourceLine" id="cb2-13" title="13"><span class="co">#&gt; 3  22.8     4   108    93  3.85  2.32  18.6     1     1     4     1</span></a>
<a class="sourceLine" id="cb2-14" title="14"><span class="co">#&gt; 4  21.4     6   258   110  3.08  3.22  19.4     1     0     3     1</span></a>
<a class="sourceLine" id="cb2-15" title="15"><span class="co">#&gt; 5  18.7     8   360   175  3.15  3.44  17.0     0     0     3     2</span></a>
<a class="sourceLine" id="cb2-16" title="16"><span class="co">#&gt; 6  18.1     6   225   105  2.76  3.46  20.2     1     0     3     1</span></a></code></pre></div>
<p>The <code>read_csv2</code> function is useful when dealing with files where the separator between columns is a semicolon <code>;</code>, and where the decimal point is represented by a comma <code>,</code>.</p>
<p>Other variants include:</p>
<ul>
<li><p><code>read_tsv</code> for tab-separated files, and</p></li>
<li><p><code>read_delim</code>, a general case which allows the separator to be specified manually.</p></li>
</ul>
<p><code>readr</code> import function will attempt to guess the column type from the first <em>N</em> lines in the data. This <em>N</em> can be set using the function argument <code>guess_max</code>. The <code>n_max</code> argument sets the number of rows to read, while the <code>skip</code> argument sets the number of rows to be skipped before reading data.</p>
<p>By default, the column names are taken from the first row of the data, but they can be manually specified by passing a character vector to <code>col_names</code>.</p>
<p>There are some other arguments to the data import functions, but the defaults usually <em>just work</em>.</p>
</div>
<div id="writing-data" class="section level3">
<h3><span class="header-section-number">1.1.2</span> Writing data</h3>
<p>Writing data uses the <code>write_*</code> family of functions, with implementations for <code>csv</code>, <code>csv2</code> etc. (represented by the asterisk), mirroring the import functions discussed above. <code>write_*</code> functions offer the <code>append</code> argument, which allow a data frame to be added to an existing file.</p>
<p>These functions are not covered here.</p>
</div>
<div id="reading-and-writing-lines" class="section level3">
<h3><span class="header-section-number">1.1.3</span> Reading and writing lines</h3>
<p>Sometimes, there is text output generated in <code>R</code> which needs to be written to file, but is not in the form of a dataframe. A good example is model outputs. It is good practice to save model output as a text file, and add it to version control.
Similarly, it may be necessary to import such text, either for display to screen, or to extract data.</p>
<p>This can be done using the <code>readr</code> functions <code>read_lines</code> and <code>write_lines</code>. Consider the model summary from a simple linear model.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" title="1"><span class="co"># get the model</span></a>
<a class="sourceLine" id="cb3-2" title="2">model =<span class="st"> </span><span class="kw">lm</span>(mpg <span class="op">~</span><span class="st"> </span>wt, <span class="dt">data =</span> mtcars)</a></code></pre></div>
<p>The model summary can be written to file. When writing lines to file, BE AWARE OF THE DIFFERENCES BETWEEN UNIX AND WINODWS line separators. Usually, this causes no trouble.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" title="1"><span class="co"># capture the model summary output</span></a>
<a class="sourceLine" id="cb4-2" title="2">model_output =<span class="st"> </span><span class="kw">capture.output</span>(<span class="kw">summary</span>(model))</a>
<a class="sourceLine" id="cb4-3" title="3"></a>
<a class="sourceLine" id="cb4-4" title="4"><span class="co"># save it to file</span></a>
<a class="sourceLine" id="cb4-5" title="5"><span class="kw">write_lines</span>(<span class="dt">x =</span> model_output,</a>
<a class="sourceLine" id="cb4-6" title="6">  <span class="dt">path =</span> <span class="st">&quot;model_output.txt&quot;</span>)</a></code></pre></div>
<p>This model output can be read back in for display, and each line of the model output is an element in a character vector.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" title="1"><span class="co"># read in the model output and display</span></a>
<a class="sourceLine" id="cb5-2" title="2">model_output =<span class="st"> </span><span class="kw">read_lines</span>(<span class="st">&quot;model_output.txt&quot;</span>)</a>
<a class="sourceLine" id="cb5-3" title="3"></a>
<a class="sourceLine" id="cb5-4" title="4"><span class="co"># use cat to show the model output as it would be on screen</span></a>
<a class="sourceLine" id="cb5-5" title="5"><span class="kw">cat</span>(model_output, <span class="dt">sep =</span> <span class="st">&quot;</span><span class="ch">\n</span><span class="st">&quot;</span>)</a>
<a class="sourceLine" id="cb5-6" title="6"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb5-7" title="7"><span class="co">#&gt; Call:</span></a>
<a class="sourceLine" id="cb5-8" title="8"><span class="co">#&gt; lm(formula = mpg ~ wt, data = mtcars)</span></a>
<a class="sourceLine" id="cb5-9" title="9"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb5-10" title="10"><span class="co">#&gt; Residuals:</span></a>
<a class="sourceLine" id="cb5-11" title="11"><span class="co">#&gt;    Min     1Q Median     3Q    Max </span></a>
<a class="sourceLine" id="cb5-12" title="12"><span class="co">#&gt; -4.543 -2.365 -0.125  1.410  6.873 </span></a>
<a class="sourceLine" id="cb5-13" title="13"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb5-14" title="14"><span class="co">#&gt; Coefficients:</span></a>
<a class="sourceLine" id="cb5-15" title="15"><span class="co">#&gt;             Estimate Std. Error t value Pr(&gt;|t|)    </span></a>
<a class="sourceLine" id="cb5-16" title="16"><span class="co">#&gt; (Intercept)   37.285      1.878   19.86  &lt; 2e-16 ***</span></a>
<a class="sourceLine" id="cb5-17" title="17"><span class="co">#&gt; wt            -5.344      0.559   -9.56  1.3e-10 ***</span></a>
<a class="sourceLine" id="cb5-18" title="18"><span class="co">#&gt; ---</span></a>
<a class="sourceLine" id="cb5-19" title="19"><span class="co">#&gt; Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1</span></a>
<a class="sourceLine" id="cb5-20" title="20"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb5-21" title="21"><span class="co">#&gt; Residual standard error: 3.05 on 30 degrees of freedom</span></a>
<a class="sourceLine" id="cb5-22" title="22"><span class="co">#&gt; Multiple R-squared:  0.753,	Adjusted R-squared:  0.745 </span></a>
<a class="sourceLine" id="cb5-23" title="23"><span class="co">#&gt; F-statistic: 91.4 on 1 and 30 DF,  p-value: 1.29e-10</span></a></code></pre></div>
<p>These few functions demonstrate the most common uses of <code>readr</code>, but most other use cases for text data can be handled using different function arguments, including reading data off the web, unzipping
compressed files before reading, and specifying the column types to control for type conversion errors.</p>
</div>
<div id="excel-files" class="section level3 unnumbered">
<h3>Excel files</h3>
<p>Finally, data is often shared or stored by well meaning people in the form of Microsoft Excel sheets. Indeed, Excel (especially when synced regularly to remote storage) is a good way of noting down observational data in the field. The <code>readxl</code> package allows importing from Excel files, including reading in specific sheets.</p>
</div>
</div>
<div id="string-manipulation-with-stringr" class="section level2">
<h2><span class="header-section-number">1.2</span> String manipulation with <code>stringr</code></h2>
<p><code>stringr</code> is the tidyverse package for string manipulation, and exists in an interesting symbiosis with the <code>stringi</code> package. For the most part, stringr is a wrapper around stringi, and is almost always more than sufficient for day-to-day needs.</p>
<p><code>stringr</code> functions begin with <code>str_</code>.</p>
<div id="putting-strings-together" class="section level3">
<h3><span class="header-section-number">1.2.1</span> Putting strings together</h3>
<p>Concatenate two strings with <code>str_c</code>, and duplicate strings with <code>str_dup</code>. Flatten a list or vector of strings using <code>str_flatten</code>.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" title="1"><span class="co"># str_c works like paste(), choose a separator</span></a>
<a class="sourceLine" id="cb6-2" title="2"><span class="kw">str_c</span>(<span class="st">&quot;this string&quot;</span>, <span class="st">&quot;this other string&quot;</span>, <span class="dt">sep =</span> <span class="st">&quot;_&quot;</span>)</a>
<a class="sourceLine" id="cb6-3" title="3"><span class="co">#&gt; [1] &quot;this string_this other string&quot;</span></a>
<a class="sourceLine" id="cb6-4" title="4"></a>
<a class="sourceLine" id="cb6-5" title="5"><span class="co"># str_dup works like rep</span></a>
<a class="sourceLine" id="cb6-6" title="6"><span class="kw">str_dup</span>(<span class="st">&quot;this string&quot;</span>, <span class="dt">times =</span> <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb6-7" title="7"><span class="co">#&gt; [1] &quot;this stringthis stringthis string&quot;</span></a>
<a class="sourceLine" id="cb6-8" title="8"></a>
<a class="sourceLine" id="cb6-9" title="9"><span class="co"># str_flatten works on lists and vectors</span></a>
<a class="sourceLine" id="cb6-10" title="10"><span class="kw">str_flatten</span>(<span class="dt">string =</span> <span class="kw">as.list</span>(letters), <span class="dt">collapse =</span> <span class="st">&quot;_&quot;</span>)</a>
<a class="sourceLine" id="cb6-11" title="11"><span class="co">#&gt; [1] &quot;a_b_c_d_e_f_g_h_i_j_k_l_m_n_o_p_q_r_s_t_u_v_w_x_y_z&quot;</span></a>
<a class="sourceLine" id="cb6-12" title="12"><span class="kw">str_flatten</span>(<span class="dt">string =</span> letters, <span class="dt">collapse =</span> <span class="st">&quot;-&quot;</span>)</a>
<a class="sourceLine" id="cb6-13" title="13"><span class="co">#&gt; [1] &quot;a-b-c-d-e-f-g-h-i-j-k-l-m-n-o-p-q-r-s-t-u-v-w-x-y-z&quot;</span></a></code></pre></div>
<p><code>str_flatten</code> is especially useful when displaying the type of an object that returns a list when <code>class</code> is called on it.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" title="1"><span class="co"># get the class of a tibble and display it as a single string</span></a>
<a class="sourceLine" id="cb7-2" title="2">class_tibble =<span class="st"> </span><span class="kw">class</span>(tibble<span class="op">::</span><span class="kw">tibble</span>(<span class="dt">a =</span> <span class="dv">1</span>))</a>
<a class="sourceLine" id="cb7-3" title="3"><span class="kw">str_flatten</span>(<span class="dt">string =</span> class_tibble, <span class="dt">collapse =</span> <span class="st">&quot;, &quot;</span>)</a>
<a class="sourceLine" id="cb7-4" title="4"><span class="co">#&gt; [1] &quot;tbl_df, tbl, data.frame&quot;</span></a></code></pre></div>
</div>
<div id="detecting-strings" class="section level3">
<h3><span class="header-section-number">1.2.2</span> Detecting strings</h3>
<p>Count the frequency of a pattern in a string with <code>str_count</code>. Returns an inteegr.
Detect whether a pattern exists in a string with <code>str_detect</code>. Returns a logical and can be used as a predicate.</p>
<p>Both are vectorised, i.e, automatically applied to a vector of arguments.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" title="1"><span class="co"># there should be 5 a-s here</span></a>
<a class="sourceLine" id="cb8-2" title="2"><span class="kw">str_count</span>(<span class="dt">string =</span> <span class="st">&quot;ababababa&quot;</span>, <span class="dt">pattern =</span> <span class="st">&quot;a&quot;</span>)</a>
<a class="sourceLine" id="cb8-3" title="3"><span class="co">#&gt; [1] 5</span></a>
<a class="sourceLine" id="cb8-4" title="4"></a>
<a class="sourceLine" id="cb8-5" title="5"><span class="co"># vectorise over the input string</span></a>
<a class="sourceLine" id="cb8-6" title="6"><span class="co"># should return a vector of length 2, with integers 5 and 3</span></a>
<a class="sourceLine" id="cb8-7" title="7"><span class="kw">str_count</span>(<span class="dt">string =</span> <span class="kw">c</span>(<span class="st">&quot;ababbababa&quot;</span>, <span class="st">&quot;banana&quot;</span>), <span class="dt">pattern =</span> <span class="st">&quot;a&quot;</span>)</a>
<a class="sourceLine" id="cb8-8" title="8"><span class="co">#&gt; [1] 5 3</span></a>
<a class="sourceLine" id="cb8-9" title="9"></a>
<a class="sourceLine" id="cb8-10" title="10"><span class="co"># vectorise over the pattern to count both a-s and b-s</span></a>
<a class="sourceLine" id="cb8-11" title="11"><span class="kw">str_count</span>(<span class="dt">string =</span> <span class="st">&quot;ababababa&quot;</span>, <span class="dt">pattern =</span> <span class="kw">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>))</a>
<a class="sourceLine" id="cb8-12" title="12"><span class="co">#&gt; [1] 5 4</span></a></code></pre></div>
<p>Vectorising over both string and pattern works as expected.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" title="1"><span class="co"># vectorise over both string and pattern</span></a>
<a class="sourceLine" id="cb9-2" title="2"><span class="co"># counts a-s in first input, and b-s in the second</span></a>
<a class="sourceLine" id="cb9-3" title="3"><span class="kw">str_count</span>(<span class="dt">string =</span> <span class="kw">c</span>(<span class="st">&quot;ababababa&quot;</span>, <span class="st">&quot;banana&quot;</span>),</a>
<a class="sourceLine" id="cb9-4" title="4">          <span class="dt">pattern =</span> <span class="kw">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>))</a>
<a class="sourceLine" id="cb9-5" title="5"><span class="co">#&gt; [1] 5 1</span></a>
<a class="sourceLine" id="cb9-6" title="6"></a>
<a class="sourceLine" id="cb9-7" title="7"><span class="co"># provide a longer pattern vector to search for both a-s</span></a>
<a class="sourceLine" id="cb9-8" title="8"><span class="co"># and b-s in both inputs</span></a>
<a class="sourceLine" id="cb9-9" title="9"><span class="kw">str_count</span>(<span class="dt">string =</span> <span class="kw">c</span>(<span class="st">&quot;ababababa&quot;</span>, <span class="st">&quot;banana&quot;</span>),</a>
<a class="sourceLine" id="cb9-10" title="10">          <span class="dt">pattern =</span> <span class="kw">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>,</a>
<a class="sourceLine" id="cb9-11" title="11">                      <span class="st">&quot;b&quot;</span>, <span class="st">&quot;a&quot;</span>))</a>
<a class="sourceLine" id="cb9-12" title="12"><span class="co">#&gt; [1] 5 1 4 3</span></a></code></pre></div>
<p><code>str_locate</code> locates the search pattern in a string, and returns the start and end as a two column matrix.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" title="1"><span class="co"># the behaviour of both str_locate and str_locate_all is</span></a>
<a class="sourceLine" id="cb10-2" title="2"><span class="co"># to find the first match by default</span></a>
<a class="sourceLine" id="cb10-3" title="3"><span class="kw">str_locate</span>(<span class="dt">string =</span> <span class="st">&quot;banana&quot;</span>, <span class="dt">pattern =</span> <span class="st">&quot;ana&quot;</span>)</a>
<a class="sourceLine" id="cb10-4" title="4"><span class="co">#&gt;      start end</span></a>
<a class="sourceLine" id="cb10-5" title="5"><span class="co">#&gt; [1,]     2   4</span></a></code></pre></div>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" title="1"><span class="co"># str_detect detects a sequence in a string</span></a>
<a class="sourceLine" id="cb11-2" title="2"><span class="kw">str_detect</span>(<span class="dt">string =</span> <span class="st">&quot;Bananageddon is coming!&quot;</span>,</a>
<a class="sourceLine" id="cb11-3" title="3">           <span class="dt">pattern =</span> <span class="st">&quot;na&quot;</span>)</a>
<a class="sourceLine" id="cb11-4" title="4"><span class="co">#&gt; [1] TRUE</span></a>
<a class="sourceLine" id="cb11-5" title="5"></a>
<a class="sourceLine" id="cb11-6" title="6"><span class="co"># str_detect is also vectorised and returns a two-element logical vector</span></a>
<a class="sourceLine" id="cb11-7" title="7"><span class="kw">str_detect</span>(<span class="dt">string =</span> <span class="st">&quot;Bananageddon is coming!&quot;</span>,</a>
<a class="sourceLine" id="cb11-8" title="8">           <span class="dt">pattern =</span> <span class="kw">c</span>(<span class="st">&quot;na&quot;</span>, <span class="st">&quot;don&quot;</span>))</a>
<a class="sourceLine" id="cb11-9" title="9"><span class="co">#&gt; [1] TRUE TRUE</span></a>
<a class="sourceLine" id="cb11-10" title="10"></a>
<a class="sourceLine" id="cb11-11" title="11"><span class="co"># use any or all to convert a multi-element logical to a single logical</span></a>
<a class="sourceLine" id="cb11-12" title="12"><span class="co"># here we ask if either of the patterns is detected</span></a>
<a class="sourceLine" id="cb11-13" title="13"><span class="kw">any</span>(<span class="kw">str_detect</span>(<span class="dt">string =</span> <span class="st">&quot;Bananageddon is coming!&quot;</span>,</a>
<a class="sourceLine" id="cb11-14" title="14">               <span class="dt">pattern =</span> <span class="kw">c</span>(<span class="st">&quot;na&quot;</span>, <span class="st">&quot;don&quot;</span>)))</a>
<a class="sourceLine" id="cb11-15" title="15"><span class="co">#&gt; [1] TRUE</span></a></code></pre></div>
<p>Detect whether a string starts or ends with a pattern. Also vectorised.
Both have a <code>negate</code> argument, which returns the negative, i.e., returns <code>FALSE</code> if the search pattern is detected.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" title="1"><span class="co"># taken straight from the examples, because they suffice</span></a>
<a class="sourceLine" id="cb12-2" title="2">fruit &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;apple&quot;</span>, <span class="st">&quot;banana&quot;</span>, <span class="st">&quot;pear&quot;</span>, <span class="st">&quot;pineapple&quot;</span>)</a>
<a class="sourceLine" id="cb12-3" title="3"><span class="co"># str_detect looks at the first character</span></a>
<a class="sourceLine" id="cb12-4" title="4"><span class="kw">str_starts</span>(fruit, <span class="st">&quot;p&quot;</span>)</a>
<a class="sourceLine" id="cb12-5" title="5"><span class="co">#&gt; [1] FALSE FALSE  TRUE  TRUE</span></a>
<a class="sourceLine" id="cb12-6" title="6"></a>
<a class="sourceLine" id="cb12-7" title="7"><span class="co"># str_ends looks at the last character</span></a>
<a class="sourceLine" id="cb12-8" title="8"><span class="kw">str_ends</span>(fruit, <span class="st">&quot;e&quot;</span>)</a>
<a class="sourceLine" id="cb12-9" title="9"><span class="co">#&gt; [1]  TRUE FALSE FALSE  TRUE</span></a>
<a class="sourceLine" id="cb12-10" title="10"></a>
<a class="sourceLine" id="cb12-11" title="11"><span class="co"># an example of negate = TRUE</span></a>
<a class="sourceLine" id="cb12-12" title="12"><span class="kw">str_ends</span>(fruit, <span class="st">&quot;e&quot;</span>, <span class="dt">negate =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb12-13" title="13"><span class="co">#&gt; [1] FALSE  TRUE  TRUE FALSE</span></a></code></pre></div>
<p><code>str_subset</code> [WHICH IS NOT RELATED TO <code>str_sub</code>] helps with subsetting a character vector based on a <code>str_detect</code> predicate.
In the example, all elements containing “banana” are subset.</p>
<p><code>str_which</code> has the same logic except that it returns the vector position and not the elements.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" title="1"><span class="co"># should return a subset vector containing the first two elements</span></a>
<a class="sourceLine" id="cb13-2" title="2"><span class="kw">str_subset</span>(<span class="kw">c</span>(<span class="st">&quot;banana&quot;</span>,</a>
<a class="sourceLine" id="cb13-3" title="3">             <span class="st">&quot;bananageddon is coming&quot;</span>,</a>
<a class="sourceLine" id="cb13-4" title="4">             <span class="st">&quot;applegeddon is not real&quot;</span>),</a>
<a class="sourceLine" id="cb13-5" title="5">           <span class="dt">pattern =</span> <span class="st">&quot;banana&quot;</span>)</a>
<a class="sourceLine" id="cb13-6" title="6"><span class="co">#&gt; [1] &quot;banana&quot;                 &quot;bananageddon is coming&quot;</span></a>
<a class="sourceLine" id="cb13-7" title="7"></a>
<a class="sourceLine" id="cb13-8" title="8"><span class="co"># returns an integer vector</span></a>
<a class="sourceLine" id="cb13-9" title="9"><span class="kw">str_which</span>(<span class="kw">c</span>(<span class="st">&quot;banana&quot;</span>,</a>
<a class="sourceLine" id="cb13-10" title="10">            <span class="st">&quot;bananageddon is coming&quot;</span>,</a>
<a class="sourceLine" id="cb13-11" title="11">            <span class="st">&quot;applegeddon is not real&quot;</span>),</a>
<a class="sourceLine" id="cb13-12" title="12">          <span class="dt">pattern =</span> <span class="st">&quot;banana&quot;</span>)</a>
<a class="sourceLine" id="cb13-13" title="13"><span class="co">#&gt; [1] 1 2</span></a></code></pre></div>
</div>
<div id="matching-strings" class="section level3">
<h3><span class="header-section-number">1.2.3</span> Matching strings</h3>
<p><code>str_match</code> returns all positive matches of the patttern in the string.
The return type is a <code>list</code>, with one element per search pattern.</p>
<p>A simple case is shown below where the search pattern is the phrase “banana”.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" title="1"><span class="kw">str_match</span>(<span class="dt">string =</span> <span class="kw">c</span>(<span class="st">&quot;banana&quot;</span>,</a>
<a class="sourceLine" id="cb14-2" title="2">                     <span class="st">&quot;bananageddon&quot;</span>,</a>
<a class="sourceLine" id="cb14-3" title="3">                     <span class="st">&quot;bananas are bad&quot;</span>),</a>
<a class="sourceLine" id="cb14-4" title="4">          <span class="dt">pattern =</span> <span class="st">&quot;banana&quot;</span>)</a>
<a class="sourceLine" id="cb14-5" title="5"><span class="co">#&gt;      [,1]    </span></a>
<a class="sourceLine" id="cb14-6" title="6"><span class="co">#&gt; [1,] &quot;banana&quot;</span></a>
<a class="sourceLine" id="cb14-7" title="7"><span class="co">#&gt; [2,] &quot;banana&quot;</span></a>
<a class="sourceLine" id="cb14-8" title="8"><span class="co">#&gt; [3,] &quot;banana&quot;</span></a></code></pre></div>
<p>The search pattern can be extended to look for multiple subsets of the search pattern. Consider searching for dates and times.</p>
<p>Here, the search pattern is a <code>regex</code> pattern that looks for a set of four digits (<code>\\d{4}</code>) and a month name <code>(\\w+)</code> seperated by a hyphen. There’s much more to be explored in dealing with dates and times in <a href="https://lubridate.tidyverse.org/"><code>lubridate</code></a>, another <code>tidyverse</code> package.</p>
<p>The return type is a list, each element is a character matrix where the first column is the string subset matching the full search pattern, and then as many columns as there are parts to the search pattern. The parts of interest in the search pattern are indicated by wrapping them in parentheses. For example, in the case below, wrapping <code>[-.]</code> in parentheses will turn it into a distinct part of the search pattern.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" title="1"><span class="co"># first with [-.] treated simply as a separator</span></a>
<a class="sourceLine" id="cb15-2" title="2"><span class="kw">str_match</span>(<span class="dt">string =</span> <span class="kw">c</span>(<span class="st">&quot;1970-somemonth-01&quot;</span>,</a>
<a class="sourceLine" id="cb15-3" title="3">                     <span class="st">&quot;1990-anothermonth-01&quot;</span>,</a>
<a class="sourceLine" id="cb15-4" title="4">                     <span class="st">&quot;2010-thismonth-01&quot;</span>),</a>
<a class="sourceLine" id="cb15-5" title="5">          <span class="dt">pattern =</span> <span class="st">&quot;(</span><span class="ch">\\</span><span class="st">d{4})[-.](</span><span class="ch">\\</span><span class="st">w+)&quot;</span>)</a>
<a class="sourceLine" id="cb15-6" title="6"><span class="co">#&gt;      [,1]                [,2]   [,3]          </span></a>
<a class="sourceLine" id="cb15-7" title="7"><span class="co">#&gt; [1,] &quot;1970-somemonth&quot;    &quot;1970&quot; &quot;somemonth&quot;   </span></a>
<a class="sourceLine" id="cb15-8" title="8"><span class="co">#&gt; [2,] &quot;1990-anothermonth&quot; &quot;1990&quot; &quot;anothermonth&quot;</span></a>
<a class="sourceLine" id="cb15-9" title="9"><span class="co">#&gt; [3,] &quot;2010-thismonth&quot;    &quot;2010&quot; &quot;thismonth&quot;</span></a>
<a class="sourceLine" id="cb15-10" title="10"></a>
<a class="sourceLine" id="cb15-11" title="11"><span class="co"># then with [-.] actively searched for</span></a>
<a class="sourceLine" id="cb15-12" title="12"><span class="kw">str_match</span>(<span class="dt">string =</span> <span class="kw">c</span>(<span class="st">&quot;1970-somemonth-01&quot;</span>,</a>
<a class="sourceLine" id="cb15-13" title="13">                     <span class="st">&quot;1990-anothermonth-01&quot;</span>,</a>
<a class="sourceLine" id="cb15-14" title="14">                     <span class="st">&quot;2010-thismonth-01&quot;</span>),</a>
<a class="sourceLine" id="cb15-15" title="15">          <span class="dt">pattern =</span> <span class="st">&quot;(</span><span class="ch">\\</span><span class="st">d{4})([-.])(</span><span class="ch">\\</span><span class="st">w+)&quot;</span>)</a>
<a class="sourceLine" id="cb15-16" title="16"><span class="co">#&gt;      [,1]                [,2]   [,3] [,4]          </span></a>
<a class="sourceLine" id="cb15-17" title="17"><span class="co">#&gt; [1,] &quot;1970-somemonth&quot;    &quot;1970&quot; &quot;-&quot;  &quot;somemonth&quot;   </span></a>
<a class="sourceLine" id="cb15-18" title="18"><span class="co">#&gt; [2,] &quot;1990-anothermonth&quot; &quot;1990&quot; &quot;-&quot;  &quot;anothermonth&quot;</span></a>
<a class="sourceLine" id="cb15-19" title="19"><span class="co">#&gt; [3,] &quot;2010-thismonth&quot;    &quot;2010&quot; &quot;-&quot;  &quot;thismonth&quot;</span></a></code></pre></div>
<p>Multiple possible matches are dealt with using <code>str_match_all</code>. An example case is uncertainty in date-time in raw data, where the date has been entered as <code>1970-somemonth-01 or 1970/anothermonth/01</code>.</p>
<p>The return type is a list, with one element per input string. Each element is a character matrix, where each row is one possible match, and each column after the first (the full match) corresponds to the parts of the search pattern.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" title="1"><span class="co"># first with a single date entry</span></a>
<a class="sourceLine" id="cb16-2" title="2"><span class="kw">str_match_all</span>(<span class="dt">string =</span> <span class="kw">c</span>(<span class="st">&quot;1970-somemonth-01 or maybe 1990/anothermonth/01&quot;</span>),</a>
<a class="sourceLine" id="cb16-3" title="3">              <span class="dt">pattern =</span> <span class="st">&quot;(</span><span class="ch">\\</span><span class="st">d{4})[</span><span class="ch">\\</span><span class="st">-</span><span class="ch">\\</span><span class="st">/]([a-z]+)&quot;</span>)</a>
<a class="sourceLine" id="cb16-4" title="4"><span class="co">#&gt; [[1]]</span></a>
<a class="sourceLine" id="cb16-5" title="5"><span class="co">#&gt;      [,1]                [,2]   [,3]          </span></a>
<a class="sourceLine" id="cb16-6" title="6"><span class="co">#&gt; [1,] &quot;1970-somemonth&quot;    &quot;1970&quot; &quot;somemonth&quot;   </span></a>
<a class="sourceLine" id="cb16-7" title="7"><span class="co">#&gt; [2,] &quot;1990/anothermonth&quot; &quot;1990&quot; &quot;anothermonth&quot;</span></a>
<a class="sourceLine" id="cb16-8" title="8"></a>
<a class="sourceLine" id="cb16-9" title="9"><span class="co"># then with multiple date entries</span></a>
<a class="sourceLine" id="cb16-10" title="10"><span class="kw">str_match_all</span>(<span class="dt">string =</span> <span class="kw">c</span>(<span class="st">&quot;1970-somemonth-01 or maybe 1990/anothermonth/01&quot;</span>,</a>
<a class="sourceLine" id="cb16-11" title="11">                         <span class="st">&quot;1990-somemonth-01 or maybe 2001/anothermonth/01&quot;</span>),</a>
<a class="sourceLine" id="cb16-12" title="12">              <span class="dt">pattern =</span> <span class="st">&quot;(</span><span class="ch">\\</span><span class="st">d{4})[</span><span class="ch">\\</span><span class="st">-</span><span class="ch">\\</span><span class="st">/]([a-z]+)&quot;</span>)</a>
<a class="sourceLine" id="cb16-13" title="13"><span class="co">#&gt; [[1]]</span></a>
<a class="sourceLine" id="cb16-14" title="14"><span class="co">#&gt;      [,1]                [,2]   [,3]          </span></a>
<a class="sourceLine" id="cb16-15" title="15"><span class="co">#&gt; [1,] &quot;1970-somemonth&quot;    &quot;1970&quot; &quot;somemonth&quot;   </span></a>
<a class="sourceLine" id="cb16-16" title="16"><span class="co">#&gt; [2,] &quot;1990/anothermonth&quot; &quot;1990&quot; &quot;anothermonth&quot;</span></a>
<a class="sourceLine" id="cb16-17" title="17"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb16-18" title="18"><span class="co">#&gt; [[2]]</span></a>
<a class="sourceLine" id="cb16-19" title="19"><span class="co">#&gt;      [,1]                [,2]   [,3]          </span></a>
<a class="sourceLine" id="cb16-20" title="20"><span class="co">#&gt; [1,] &quot;1990-somemonth&quot;    &quot;1990&quot; &quot;somemonth&quot;   </span></a>
<a class="sourceLine" id="cb16-21" title="21"><span class="co">#&gt; [2,] &quot;2001/anothermonth&quot; &quot;2001&quot; &quot;anothermonth&quot;</span></a></code></pre></div>
</div>
<div id="simpler-pattern-extraction" class="section level3">
<h3><span class="header-section-number">1.2.4</span> Simpler pattern extraction</h3>
<p>The full functionality of <code>str_match_*</code> can be boiled down to the most common use case, extracting one or more full matches of the search pattern using <code>str_extract</code> and <code>str_extract_all</code> respectively.</p>
<p><code>str_extract</code> returns a character vector with the same length as the input string vector, while <code>str_extract_all</code> returns a list, with a character vector whose elements are the matches.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" title="1"><span class="co"># extracting the first full match using str_extract</span></a>
<a class="sourceLine" id="cb17-2" title="2"><span class="kw">str_extract</span>(<span class="dt">string =</span> <span class="kw">c</span>(<span class="st">&quot;1970-somemonth-01 or maybe 1990/anothermonth/01&quot;</span>,</a>
<a class="sourceLine" id="cb17-3" title="3">                       <span class="st">&quot;1990-somemonth-01 or maybe 2001/anothermonth/01&quot;</span>),</a>
<a class="sourceLine" id="cb17-4" title="4">            <span class="dt">pattern =</span> <span class="st">&quot;(</span><span class="ch">\\</span><span class="st">d{4})[</span><span class="ch">\\</span><span class="st">-</span><span class="ch">\\</span><span class="st">/]([a-z]+)&quot;</span>)</a>
<a class="sourceLine" id="cb17-5" title="5"><span class="co">#&gt; [1] &quot;1970-somemonth&quot; &quot;1990-somemonth&quot;</span></a>
<a class="sourceLine" id="cb17-6" title="6"></a>
<a class="sourceLine" id="cb17-7" title="7"><span class="co"># extracting all full matches using str_extract all</span></a>
<a class="sourceLine" id="cb17-8" title="8"><span class="kw">str_extract_all</span>(<span class="dt">string =</span> <span class="kw">c</span>(<span class="st">&quot;1970-somemonth-01 or maybe 1990/anothermonth/01&quot;</span>,</a>
<a class="sourceLine" id="cb17-9" title="9">                           <span class="st">&quot;1990-somemonth-01 or maybe 2001/anothermonth/01&quot;</span>),</a>
<a class="sourceLine" id="cb17-10" title="10">                <span class="dt">pattern =</span> <span class="st">&quot;(</span><span class="ch">\\</span><span class="st">d{4})[</span><span class="ch">\\</span><span class="st">-</span><span class="ch">\\</span><span class="st">/]([a-z]+)&quot;</span>)</a>
<a class="sourceLine" id="cb17-11" title="11"><span class="co">#&gt; [[1]]</span></a>
<a class="sourceLine" id="cb17-12" title="12"><span class="co">#&gt; [1] &quot;1970-somemonth&quot;    &quot;1990/anothermonth&quot;</span></a>
<a class="sourceLine" id="cb17-13" title="13"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb17-14" title="14"><span class="co">#&gt; [[2]]</span></a>
<a class="sourceLine" id="cb17-15" title="15"><span class="co">#&gt; [1] &quot;1990-somemonth&quot;    &quot;2001/anothermonth&quot;</span></a></code></pre></div>
</div>
<div id="breaking-strings-apart" class="section level3">
<h3><span class="header-section-number">1.2.5</span> Breaking strings apart</h3>
<p><code>str_split</code>, str_sub,
In the above date-time example, when reading filenames from a path, or when working sequences separated by a known pattern generally, <code>str_split</code> can help separate elements of interest.</p>
<p>The return type is a list similar to <code>str_match</code>.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" title="1"><span class="co"># split on either a hyphen or a forward slash</span></a>
<a class="sourceLine" id="cb18-2" title="2"><span class="kw">str_split</span>(<span class="dt">string =</span> <span class="kw">c</span>(<span class="st">&quot;1970-somemonth-01&quot;</span>,</a>
<a class="sourceLine" id="cb18-3" title="3">                     <span class="st">&quot;1990/anothermonth/01&quot;</span>),</a>
<a class="sourceLine" id="cb18-4" title="4">          <span class="dt">pattern =</span> <span class="st">&quot;[</span><span class="ch">\\</span><span class="st">-</span><span class="ch">\\</span><span class="st">/]&quot;</span>)</a>
<a class="sourceLine" id="cb18-5" title="5"><span class="co">#&gt; [[1]]</span></a>
<a class="sourceLine" id="cb18-6" title="6"><span class="co">#&gt; [1] &quot;1970&quot;      &quot;somemonth&quot; &quot;01&quot;       </span></a>
<a class="sourceLine" id="cb18-7" title="7"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb18-8" title="8"><span class="co">#&gt; [[2]]</span></a>
<a class="sourceLine" id="cb18-9" title="9"><span class="co">#&gt; [1] &quot;1990&quot;         &quot;anothermonth&quot; &quot;01&quot;</span></a></code></pre></div>
<p>This can be useful in recovering simulation parameters from a filename, but may require some knowledge of <code>regex</code>.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb19-1" title="1"><span class="co"># assume a simulation output file</span></a>
<a class="sourceLine" id="cb19-2" title="2">filename =<span class="st"> &quot;sim_param1_0.01_param2_0.05_param3_0.01.ext&quot;</span></a>
<a class="sourceLine" id="cb19-3" title="3"></a>
<a class="sourceLine" id="cb19-4" title="4"><span class="co"># not quite there</span></a>
<a class="sourceLine" id="cb19-5" title="5"><span class="kw">str_split</span>(filename, <span class="dt">pattern =</span> <span class="st">&quot;_&quot;</span>)</a>
<a class="sourceLine" id="cb19-6" title="6"><span class="co">#&gt; [[1]]</span></a>
<a class="sourceLine" id="cb19-7" title="7"><span class="co">#&gt; [1] &quot;sim&quot;      &quot;param1&quot;   &quot;0.01&quot;     &quot;param2&quot;   &quot;0.05&quot;     &quot;param3&quot;   &quot;0.01.ext&quot;</span></a>
<a class="sourceLine" id="cb19-8" title="8"></a>
<a class="sourceLine" id="cb19-9" title="9"><span class="co"># not really</span></a>
<a class="sourceLine" id="cb19-10" title="10"><span class="kw">str_split</span>(filename,</a>
<a class="sourceLine" id="cb19-11" title="11">          <span class="dt">pattern =</span> <span class="st">&quot;sim_&quot;</span>)</a>
<a class="sourceLine" id="cb19-12" title="12"><span class="co">#&gt; [[1]]</span></a>
<a class="sourceLine" id="cb19-13" title="13"><span class="co">#&gt; [1] &quot;&quot;                                       </span></a>
<a class="sourceLine" id="cb19-14" title="14"><span class="co">#&gt; [2] &quot;param1_0.01_param2_0.05_param3_0.01.ext&quot;</span></a>
<a class="sourceLine" id="cb19-15" title="15"></a>
<a class="sourceLine" id="cb19-16" title="16"><span class="co"># getting there but still needs work</span></a>
<a class="sourceLine" id="cb19-17" title="17"><span class="kw">str_split</span>(filename,</a>
<a class="sourceLine" id="cb19-18" title="18">          <span class="dt">pattern =</span> <span class="st">&quot;(sim_)|_*param</span><span class="ch">\\</span><span class="st">d{1}_|(.ext)&quot;</span>)</a>
<a class="sourceLine" id="cb19-19" title="19"><span class="co">#&gt; [[1]]</span></a>
<a class="sourceLine" id="cb19-20" title="20"><span class="co">#&gt; [1] &quot;&quot;     &quot;&quot;     &quot;0.01&quot; &quot;0.05&quot; &quot;0.01&quot; &quot;&quot;</span></a></code></pre></div>
<p><code>str_split_fixed</code> split the string into as many pieces as specified, and can be especially useful dealing with filepaths.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb20-1" title="1"><span class="co"># split on either a hyphen or a forward slash</span></a>
<a class="sourceLine" id="cb20-2" title="2"><span class="kw">str_split_fixed</span>(<span class="dt">string =</span> <span class="st">&quot;dir_level_1/dir_level_2/file.ext&quot;</span>,</a>
<a class="sourceLine" id="cb20-3" title="3">                <span class="dt">pattern =</span> <span class="st">&quot;/&quot;</span>,</a>
<a class="sourceLine" id="cb20-4" title="4">                <span class="dt">n =</span> <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb20-5" title="5"><span class="co">#&gt;      [,1]          [,2]                  </span></a>
<a class="sourceLine" id="cb20-6" title="6"><span class="co">#&gt; [1,] &quot;dir_level_1&quot; &quot;dir_level_2/file.ext&quot;</span></a></code></pre></div>
</div>
<div id="replacing-string-elements" class="section level3">
<h3><span class="header-section-number">1.2.6</span> Replacing string elements</h3>
<p><code>str_replace</code> is intended to replace the search pattern, and can be co-opted into the task of recovering simulation parameters or other data from regularly named files. <code>str_replace_all</code> works the same way but replaces all matches of the search pattern.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb21-1" title="1"><span class="co"># replace all unwanted characters from this hypothetical filename with spaces</span></a>
<a class="sourceLine" id="cb21-2" title="2">filename =<span class="st"> &quot;sim_param1_0.01_param2_0.05_param3_0.01.ext&quot;</span></a>
<a class="sourceLine" id="cb21-3" title="3"><span class="kw">str_replace_all</span>(filename,</a>
<a class="sourceLine" id="cb21-4" title="4">                <span class="dt">pattern =</span> <span class="st">&quot;(sim_)|_*param</span><span class="ch">\\</span><span class="st">d{1}_|(.ext)&quot;</span>,</a>
<a class="sourceLine" id="cb21-5" title="5">                <span class="dt">replacement =</span> <span class="st">&quot; &quot;</span>)</a>
<a class="sourceLine" id="cb21-6" title="6"><span class="co">#&gt; [1] &quot;  0.01 0.05 0.01 &quot;</span></a></code></pre></div>
<p><code>str_remove</code> is a wrapper around <code>str_replace</code> where the replacement is set to <code>""</code>. This is not covered here.</p>
<p>Having replaced unwanted characters in the filename with spaces, <code>str_trim</code> offers a way to remove leading and trailing whitespaces.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb22-1" title="1"><span class="co"># trim whitespaces from this filename after replacing unwanted text</span></a>
<a class="sourceLine" id="cb22-2" title="2">filename =<span class="st"> &quot;sim_param1_0.01_param2_0.05_param3_0.01.ext&quot;</span></a>
<a class="sourceLine" id="cb22-3" title="3">filename_with_spaces =<span class="st"> </span><span class="kw">str_replace_all</span>(filename,</a>
<a class="sourceLine" id="cb22-4" title="4">                                       <span class="dt">pattern =</span> <span class="st">&quot;(sim_)|_*param</span><span class="ch">\\</span><span class="st">d{1}_|(.ext)&quot;</span>,</a>
<a class="sourceLine" id="cb22-5" title="5">                                       <span class="dt">replacement =</span> <span class="st">&quot; &quot;</span>)</a>
<a class="sourceLine" id="cb22-6" title="6">filename_without_spaces =<span class="st"> </span><span class="kw">str_trim</span>(filename_with_spaces)</a>
<a class="sourceLine" id="cb22-7" title="7">filename_without_spaces</a>
<a class="sourceLine" id="cb22-8" title="8"><span class="co">#&gt; [1] &quot;0.01 0.05 0.01&quot;</span></a>
<a class="sourceLine" id="cb22-9" title="9"></a>
<a class="sourceLine" id="cb22-10" title="10"><span class="co"># the result can be split on whitespaces to return useful data</span></a>
<a class="sourceLine" id="cb22-11" title="11"><span class="kw">str_split</span>(filename_without_spaces, <span class="st">&quot; &quot;</span>)</a>
<a class="sourceLine" id="cb22-12" title="12"><span class="co">#&gt; [[1]]</span></a>
<a class="sourceLine" id="cb22-13" title="13"><span class="co">#&gt; [1] &quot;0.01&quot; &quot;0.05&quot; &quot;0.01&quot;</span></a></code></pre></div>
</div>
<div id="subsetting-within-strings" class="section level3">
<h3><span class="header-section-number">1.2.7</span> Subsetting within strings</h3>
<p>When strings are highly regular, useful data can be extracted from a string using <code>str_sub</code>. In the date-time example, the year is always represented by the first four characters.</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb23-1" title="1"><span class="co"># get the year as characters 1 - 4</span></a>
<a class="sourceLine" id="cb23-2" title="2"><span class="kw">str_sub</span>(<span class="dt">string =</span> <span class="kw">c</span>(<span class="st">&quot;1970-somemonth-01&quot;</span>,</a>
<a class="sourceLine" id="cb23-3" title="3">                   <span class="st">&quot;1990-anothermonth-01&quot;</span>,</a>
<a class="sourceLine" id="cb23-4" title="4">                   <span class="st">&quot;2010-thismonth-01&quot;</span>),</a>
<a class="sourceLine" id="cb23-5" title="5">        <span class="dt">start =</span> <span class="dv">1</span>, <span class="dt">end =</span> <span class="dv">4</span>)</a>
<a class="sourceLine" id="cb23-6" title="6"><span class="co">#&gt; [1] &quot;1970&quot; &quot;1990&quot; &quot;2010&quot;</span></a></code></pre></div>
<p>Similarly, it’s possible to extract the last few characters using negative indices.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb24-1" title="1"><span class="co"># get the day as characters -2 to -1</span></a>
<a class="sourceLine" id="cb24-2" title="2"><span class="kw">str_sub</span>(<span class="dt">string =</span> <span class="kw">c</span>(<span class="st">&quot;1970-somemonth-01&quot;</span>,</a>
<a class="sourceLine" id="cb24-3" title="3">                   <span class="st">&quot;1990-anothermonth-21&quot;</span>,</a>
<a class="sourceLine" id="cb24-4" title="4">                   <span class="st">&quot;2010-thismonth-31&quot;</span>),</a>
<a class="sourceLine" id="cb24-5" title="5">        <span class="dt">start =</span> <span class="dv">-2</span>, <span class="dt">end =</span> <span class="dv">-1</span>)</a>
<a class="sourceLine" id="cb24-6" title="6"><span class="co">#&gt; [1] &quot;01&quot; &quot;21&quot; &quot;31&quot;</span></a></code></pre></div>
<p>Finally, it’s also possible to replace characters within a string based on the position. This requires using the assignment operator <code>&lt;-</code>.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb25-1" title="1"><span class="co"># replace all days in these dates to 01</span></a>
<a class="sourceLine" id="cb25-2" title="2">date_times =<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;1970-somemonth-25&quot;</span>,</a>
<a class="sourceLine" id="cb25-3" title="3">               <span class="st">&quot;1990-anothermonth-21&quot;</span>,</a>
<a class="sourceLine" id="cb25-4" title="4">               <span class="st">&quot;2010-thismonth-31&quot;</span>)</a>
<a class="sourceLine" id="cb25-5" title="5"></a>
<a class="sourceLine" id="cb25-6" title="6"><span class="co"># a strictly necessary use of the assignment operator</span></a>
<a class="sourceLine" id="cb25-7" title="7"><span class="kw">str_sub</span>(date_times,</a>
<a class="sourceLine" id="cb25-8" title="8">        <span class="dt">start =</span> <span class="dv">-2</span>, <span class="dt">end =</span> <span class="dv">-1</span>) &lt;-<span class="st"> &quot;01&quot;</span></a>
<a class="sourceLine" id="cb25-9" title="9"></a>
<a class="sourceLine" id="cb25-10" title="10">date_times</a>
<a class="sourceLine" id="cb25-11" title="11"><span class="co">#&gt; [1] &quot;1970-somemonth-01&quot;    &quot;1990-anothermonth-01&quot; &quot;2010-thismonth-01&quot;</span></a></code></pre></div>
</div>
<div id="padding-and-truncating-strings" class="section level3">
<h3><span class="header-section-number">1.2.8</span> Padding and truncating strings</h3>
<p>Strings included in filenames or plots are often of unequal lengths, especially when they represent numbers. <code>str_pad</code> can pad strings with suitable characters to maintain equal length filenames, with which it is easier to work.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb26-1" title="1"><span class="co"># pad so all values have three digits</span></a>
<a class="sourceLine" id="cb26-2" title="2"><span class="kw">str_pad</span>(<span class="dt">string =</span> <span class="kw">c</span>(<span class="st">&quot;1&quot;</span>, <span class="st">&quot;10&quot;</span>, <span class="st">&quot;100&quot;</span>),</a>
<a class="sourceLine" id="cb26-3" title="3">        <span class="dt">width =</span> <span class="dv">3</span>,</a>
<a class="sourceLine" id="cb26-4" title="4">        <span class="dt">side =</span> <span class="st">&quot;left&quot;</span>,</a>
<a class="sourceLine" id="cb26-5" title="5">        <span class="dt">pad =</span> <span class="st">&quot;0&quot;</span>)</a>
<a class="sourceLine" id="cb26-6" title="6"><span class="co">#&gt; [1] &quot;001&quot; &quot;010&quot; &quot;100&quot;</span></a></code></pre></div>
<p>Strings can also be truncated if they are too long.</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb27-1" title="1"><span class="kw">str_trunc</span>(<span class="dt">string =</span> <span class="kw">c</span>(<span class="st">&quot;bananas are great and wonderful</span></a>
<a class="sourceLine" id="cb27-2" title="2"><span class="st">                     and more stuff about bananas and</span></a>
<a class="sourceLine" id="cb27-3" title="3"><span class="st">                     it really goes on about bananas&quot;</span>),</a>
<a class="sourceLine" id="cb27-4" title="4">          <span class="dt">width =</span> <span class="dv">27</span>,</a>
<a class="sourceLine" id="cb27-5" title="5">          <span class="dt">side =</span> <span class="st">&quot;right&quot;</span>, <span class="dt">ellipsis =</span> <span class="st">&quot;etc. etc.&quot;</span>)</a>
<a class="sourceLine" id="cb27-6" title="6"><span class="co">#&gt; [1] &quot;bananas are great etc. etc.&quot;</span></a></code></pre></div>
</div>
<div id="stringr-aspects-not-covered-here" class="section level3">
<h3><span class="header-section-number">1.2.9</span> Stringr aspects not covered here</h3>
<p>Some <code>stringr</code> functions are not covered here. These include:</p>
<ul>
<li><p><code>str_wrap</code> (of dubious use),</p></li>
<li><p><code>str_interp</code>, <code>str_glue*</code> (better to use <code>glue</code>; see below),</p></li>
<li><p><code>str_sort</code>, <code>str_order</code> (used in sorting a character vector),</p></li>
<li><p><code>str_to_case*</code> (case conversion), and</p></li>
<li><p><code>str_view*</code> (a graphical view of search pattern matches).</p></li>
<li><p><code>word</code>, <code>boundary</code> etc. The use of word is covered below.</p></li>
</ul>
<p><a href="https://cran.r-project.org/web/packages/stringi/"><code>stringi</code></a>, of which <code>stringr</code> is a wrapper, offers a lot more flexibility and control.</p>
</div>
</div>
<div id="string-interpolation-with-glue" class="section level2">
<h2><span class="header-section-number">1.3</span> String interpolation with <code>glue</code></h2>
<p>The idea behind string interpolation is to procedurally generate new complex strings from pre-existing data.</p>
<p><code>glue</code> is as simple as the example shown.</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb28-1" title="1"><span class="co"># print that each car name is a car model</span></a>
<a class="sourceLine" id="cb28-2" title="2">cars =<span class="st"> </span><span class="kw">rownames</span>(<span class="kw">head</span>(mtcars))</a>
<a class="sourceLine" id="cb28-3" title="3"><span class="kw">glue</span>(<span class="st">&#39;The {cars} is a car model&#39;</span>)</a>
<a class="sourceLine" id="cb28-4" title="4"><span class="co">#&gt; The Mazda RX4 is a car model</span></a>
<a class="sourceLine" id="cb28-5" title="5"><span class="co">#&gt; The Mazda RX4 Wag is a car model</span></a>
<a class="sourceLine" id="cb28-6" title="6"><span class="co">#&gt; The Datsun 710 is a car model</span></a>
<a class="sourceLine" id="cb28-7" title="7"><span class="co">#&gt; The Hornet 4 Drive is a car model</span></a>
<a class="sourceLine" id="cb28-8" title="8"><span class="co">#&gt; The Hornet Sportabout is a car model</span></a>
<a class="sourceLine" id="cb28-9" title="9"><span class="co">#&gt; The Valiant is a car model</span></a></code></pre></div>
<p>This creates and prints a vector of car names stating each is a car model.</p>
<p>The related <code>glue_data</code> is even more useful in printing from a dataframe.
In this example, it can quickly generate command line arguments or filenames.</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb29-1" title="1"><span class="co"># use dataframes for now</span></a>
<a class="sourceLine" id="cb29-2" title="2">parameter_combinations =<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">param1 =</span> letters[<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>],</a>
<a class="sourceLine" id="cb29-3" title="3">                                    <span class="dt">param2 =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">5</span>)</a>
<a class="sourceLine" id="cb29-4" title="4"></a>
<a class="sourceLine" id="cb29-5" title="5"><span class="co"># for command line arguments or to start multiple job scripts on the cluster</span></a>
<a class="sourceLine" id="cb29-6" title="6"><span class="kw">glue_data</span>(parameter_combinations,</a>
<a class="sourceLine" id="cb29-7" title="7">          <span class="st">&#39;simulation-name {param1} {param2}&#39;</span>)</a>
<a class="sourceLine" id="cb29-8" title="8"><span class="co">#&gt; simulation-name a 1</span></a>
<a class="sourceLine" id="cb29-9" title="9"><span class="co">#&gt; simulation-name b 2</span></a>
<a class="sourceLine" id="cb29-10" title="10"><span class="co">#&gt; simulation-name c 3</span></a>
<a class="sourceLine" id="cb29-11" title="11"><span class="co">#&gt; simulation-name d 4</span></a>
<a class="sourceLine" id="cb29-12" title="12"><span class="co">#&gt; simulation-name e 5</span></a>
<a class="sourceLine" id="cb29-13" title="13"></a>
<a class="sourceLine" id="cb29-14" title="14"><span class="co"># for filenames</span></a>
<a class="sourceLine" id="cb29-15" title="15"><span class="kw">glue_data</span>(parameter_combinations,</a>
<a class="sourceLine" id="cb29-16" title="16">          <span class="st">&#39;sim_data_param1_{param1}_param2_{param2}.ext&#39;</span>)</a>
<a class="sourceLine" id="cb29-17" title="17"><span class="co">#&gt; sim_data_param1_a_param2_1.ext</span></a>
<a class="sourceLine" id="cb29-18" title="18"><span class="co">#&gt; sim_data_param1_b_param2_2.ext</span></a>
<a class="sourceLine" id="cb29-19" title="19"><span class="co">#&gt; sim_data_param1_c_param2_3.ext</span></a>
<a class="sourceLine" id="cb29-20" title="20"><span class="co">#&gt; sim_data_param1_d_param2_4.ext</span></a>
<a class="sourceLine" id="cb29-21" title="21"><span class="co">#&gt; sim_data_param1_e_param2_5.ext</span></a></code></pre></div>
<p>Finally, the convenient <code>glue_sql</code> and <code>glue_data_sql</code> are used to safely write SQL queries where variables from data are appropriately quoted. This is not covered here, but it is good to know it exists.</p>
<p><code>glue</code> has some more functions — <code>glue_safe</code>, <code>glue_collapse</code>, and <code>glue_col</code>, but these are infrequently used. Their functionality can be found on the <code>glue</code> github page.</p>
</div>
<div id="strings-in-ggplot" class="section level2">
<h2><span class="header-section-number">1.4</span> Strings in <code>ggplot</code></h2>
<p><code>ggplot</code> has two <code>geoms</code> (wait for the <code>ggplot</code> tutorial to understand more about geoms) that work with text: <code>geom_text</code> and <code>geom_label</code>. These geoms allow text to be pasted on to the main body of a plot.</p>
<p>Often, these may overlap when the data are closely spaced. The package <code>ggrepel</code> offers another <code>geom</code>, <code>geom_text_repel</code> (and the related <code>geom_label_repel</code>) that help arrange text on a plot so it doesn’t overlap with other features. This is <em>not perfect</em>, but it works more often than not.</p>
<p>More examples can be found on the <a href="https://github.com/slowkow/ggrepel">ggrepl website</a>.</p>
<p>Here, the arguments to <code>geom_text_repel</code> are taken both from the mtcars data (position), as well as from the car brands extracted using the <code>stringr::word</code> (labels), which tries to separate strings based on a regular pattern.</p>
<p>The details of <code>ggplot</code> are covered in a later tutorial.</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb30-1" title="1"><span class="kw">library</span>(ggplot2)</a>
<a class="sourceLine" id="cb30-2" title="2"><span class="kw">library</span>(ggrepel)</a>
<a class="sourceLine" id="cb30-3" title="3"></a>
<a class="sourceLine" id="cb30-4" title="4"><span class="co"># prepare car labels using word function</span></a>
<a class="sourceLine" id="cb30-5" title="5">car_labels =<span class="st"> </span><span class="kw">word</span>(<span class="kw">rownames</span>(mtcars))</a>
<a class="sourceLine" id="cb30-6" title="6"></a>
<a class="sourceLine" id="cb30-7" title="7"><span class="kw">ggplot</span>(mtcars,</a>
<a class="sourceLine" id="cb30-8" title="8">       <span class="kw">aes</span>(<span class="dt">x =</span> wt, <span class="dt">y =</span> mpg,</a>
<a class="sourceLine" id="cb30-9" title="9">           <span class="dt">label =</span> <span class="kw">rownames</span>(mtcars)))<span class="op">+</span></a>
<a class="sourceLine" id="cb30-10" title="10"><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">colour =</span> <span class="st">&quot;red&quot;</span>)<span class="op">+</span></a>
<a class="sourceLine" id="cb30-11" title="11"><span class="st">  </span><span class="kw">geom_text_repel</span>(<span class="kw">aes</span>(<span class="dt">label =</span> car_labels),</a>
<a class="sourceLine" id="cb30-12" title="12">                  <span class="dt">direction =</span> <span class="st">&quot;x&quot;</span>,</a>
<a class="sourceLine" id="cb30-13" title="13">                  <span class="dt">nudge_x =</span> <span class="fl">0.2</span>,</a>
<a class="sourceLine" id="cb30-14" title="14">                  <span class="dt">box.padding =</span> <span class="fl">0.5</span>,</a>
<a class="sourceLine" id="cb30-15" title="15">                  <span class="dt">point.padding =</span> <span class="fl">0.5</span>)</a></code></pre></div>
<p><img src="TRES-Tidy-Tutorial_files/figure-html/unnamed-chunk-29-1.png" width="\textwidth" style="display: block; margin: auto;" /></p>
<p>This is not a good looking plot, because it breaks other rules of plot design, such as whether this sort of plot should be made at all. Labels and text need to be applied sparingly, for example drawing attention or adding information to outliers.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="reshaping-data-tables-in-the-tidyverse-and-other-things.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/pratikunterwegs/tres-tidy-tutorial/edit/master/01_read_data_wrangle_strings.rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["TRES-Tidy-Tutorial.pdf"],
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
